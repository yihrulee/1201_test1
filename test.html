<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>å…§åˆ†æ³Œç³»çµ±æ¸¬é©— (è‡ªå¸¶æ¡†æ¡†ç‰ˆ)</title>
<style>
  /* --- åŸºç¤è¨­å®š --- */
  body {
    font-family: "Microsoft JhengHei", Arial, sans-serif;
    background-color: #f0f2f5;
    margin: 0;
    padding: 10px;
    display: flex;
    justify-content: center;
    min-height: 100vh;
    box-sizing: border-box;
    overscroll-behavior: none; 
  }

  .main-container {
    display: flex;
    background-color: white;
    padding: 20px;
    border-radius: 12px;
    box-shadow: 0 5px 20px rgba(0,0,0,0.1);
    max-width: 1200px;
    width: 100%;
    gap: 20px;
    align-items: flex-start;
    flex-direction: row;
  }

  /* --- å·¦å´ï¼šé¸é …å€ --- */
  .options-panel {
    width: 200px;
    flex-shrink: 0;
    display: flex;
    flex-direction: column;
    gap: 8px;
    background: #f9f9f9;
    padding: 10px;
    border-radius: 8px;
    min-height: 300px; 
  }

  .options-header {
    color: #0033cc;
    font-weight: bold;
    text-align: center;
    border-bottom: 2px solid #0033cc;
    padding-bottom: 5px;
    margin-bottom: 5px;
  }

  .draggable-item {
    background-color: #fff;
    color: #cc0000; 
    font-weight: bold;
    font-size: 16px;
    padding: 10px 4px;
    text-align: center;
    border: 2px solid #ddd;
    border-radius: 6px;
    cursor: grab;
    user-select: none;
    touch-action: none; 
    box-shadow: 2px 2px 5px rgba(0,0,0,0.05);
    transition: transform 0.1s;
  }

  /* 1. é›»è…¦ç‰ˆæ‹–æ›³ä¸­ */
  .draggable-item.dragging {
    opacity: 0.4;
    border: 2px dashed #999;
    background-color: #eee;
  }

  /* 2. æ‰‹æ©Ÿç‰ˆæ‹–æ›³ä¸­ */
  .draggable-item.touch-drag {
    position: fixed;
    z-index: 9999;
    opacity: 0.9;
    background-color: #ffe082;
    box-shadow: 0 10px 20px rgba(0,0,0,0.2);
    pointer-events: none; 
    width: 150px; 
    transform: scale(1.1); 
  }

  .draggable-item.matched {
    display: none; 
  }

  /* --- å³å´ï¼šåœ–ç‰‡äº’å‹•å€ --- */
  .game-board {
    position: relative;
    width: 100%;
    font-size: 0; 
  }

  .base-image {
    width: 100%;
    height: auto;
    display: block;
    border-radius: 8px;
    pointer-events: none;
    /* é€™è£¡ä½ å¯ä»¥æ”¾å»èƒŒå¾Œçš„åœ– */
  }

  /* --- æ”¾ç½®æ¡†æ¡†æ¨£å¼ (é—œéµä¿®æ”¹) --- */
  .drop-zone {
    position: absolute;
    width: 20.5%; 
    height: 7.2%; 
    
    /* === é€™è£¡ç›´æ¥ç•«å‡ºæ¡†æ¡† === */
    background-color: #ffffff; /* ç™½åº• */
    border: 2px solid #333;    /* é»‘æ¡† (é¡ä¼¼åŸæœ¬åœ–ç‰‡çš„é¢¨æ ¼) */
    box-shadow: 2px 2px 4px rgba(0,0,0,0.1); /* åŠ ä¸€é»é»é™°å½±æ›´æœ‰ç«‹é«”æ„Ÿ */
    
    border-radius: 4px;
    display: flex;
    justify-content: center;
    align-items: center;
    
    /* å­—é«”å¤§å° */
    font-size: clamp(10px, 1.4vw, 20px); 
    font-weight: bold;
    color: transparent; /* ç­”å°å‰æ–‡å­—é€æ˜ */
    z-index: 10;
    box-sizing: border-box; 
    transition: background-color 0.2s, border-color 0.2s;
  }

  /* æ‹–æ›³ç¶“éæ™‚è®Šè‰² */
  .drop-zone.drag-over {
    background-color: #fff9c4; /* æ·¡æ·¡çš„é»ƒè‰² */
    border: 2px dashed #fbc02d;
    transform: scale(1.02); /* å¾®å¾®æ”¾å¤§æç¤º */
  }

  /* ç­”å°æ™‚çš„æ¨£å¼ */
  .drop-zone.correct {
    background-color: #ffffff;
    color: #cc0000; /* ç´…å­— */
    border: 2px solid #4caf50; /* è®Šæˆç¶ æ¡† (è¡¨ç¤ºæ­£ç¢º) */
    box-shadow: 0 0 8px rgba(76, 175, 80, 0.4);
    overflow: hidden;
    white-space: nowrap;
  }

  /* --- åº§æ¨™è¨­å®š --- */
  /* å› ç‚ºä½ è‡ªå·±ç•«æ¡†æ¡†ï¼Œé€™è£¡çš„ top/left å¾ˆé‡è¦ï¼Œè«‹æ ¹æ“šä½ çš„ã€Œç„¡æ¡†åº•åœ–ã€å¾®èª¿ */
  
  /* 1. è…¦å‚è…º */
  #zone-gland-pituitary { top: 9.8%; left: 52%; }
  #zone-hormone-pituitary { top: 9.8%; left: 77.2%; }
  /* 2. ç”²ç‹€è…º */
  #zone-gland-thyroid { top: 22.2%; left: 52%; }
  #zone-hormone-thyroid { top: 22.2%; left: 77.2%; }
  /* 3. å‰¯ç”²ç‹€è…º */
  #zone-gland-parathyroid { top: 52.5%; left: 52%; }
  #zone-hormone-parathyroid { top: 52.5%; left: 77.2%; }
  /* 4. è…ä¸Šè…º */
  #zone-gland-adrenal { top: 64.8%; left: 52%; }
  #zone-hormone-adrenal { top: 64.8%; left: 77.2%; }
  /* 5. èƒ°å³¶ */
  #zone-gland-pancreas { top: 77.2%; left: 52%; }
  #zone-hormone-pancreas { top: 77.2%; left: 77.2%; }
  /* 6. æ€§è…º */
  #zone-gland-gonad { top: 89.5%; left: 52%; }
  #zone-hormone-gonad { top: 89.5%; left: 77.2%; }


  /* --- æˆåŠŸç•«é¢ --- */
  #success-overlay {
    position: absolute;
    top: 0; left: 0; right: 0; bottom: 0;
    background: rgba(255,255,255,0.9);
    display: none; 
    flex-direction: column;
    justify-content: center;
    align-items: center;
    z-index: 50;
    border-radius: 8px;
    text-align: center;
  }
  
  #success-overlay h2 {
    color: #4caf50;
    font-size: 2em;
    margin: 0 0 20px 0;
  }
  
  button.reset-btn {
    padding: 10px 25px;
    font-size: 1.1em;
    background-color: #2196f3;
    color: white;
    border: none;
    border-radius: 50px;
    cursor: pointer;
  }

  /* --- æ‰‹æ©Ÿç‰ˆèª¿æ•´ --- */
  @media (max-width: 800px) {
    .main-container { 
      flex-direction: column; 
      align-items: center; 
      padding: 10px;
    }
    .options-panel { 
      width: 100%; 
      flex-direction: row; 
      flex-wrap: wrap; 
      justify-content: center;
    }
    .draggable-item {
      font-size: 14px;
      padding: 8px 12px;
      flex-grow: 1; 
    }
  }
</style>
</head>
<body>

<div class="main-container">
  
  <div class="options-panel" id="options-container">
    <div class="options-header">é¸é …æ¸…å–®</div>
    <div class="draggable-item" data-type="gland" data-id="pituitary">è…¦å‚è…º</div>
    <div class="draggable-item" data-type="gland" data-id="thyroid">ç”²ç‹€è…º</div>
    <div class="draggable-item" data-type="gland" data-id="parathyroid">å‰¯ç”²ç‹€è…º</div>
    <div class="draggable-item" data-type="gland" data-id="adrenal">è…ä¸Šè…º</div>
    <div class="draggable-item" data-type="gland" data-id="pancreas">èƒ°å³¶</div>
    <div class="draggable-item" data-type="gland" data-id="gonad">æ€§è…º</div>

    <div class="draggable-item" data-type="hormone" data-id="pituitary">ç”Ÿé•·æ¿€ç´ </div>
    <div class="draggable-item" data-type="hormone" data-id="thyroid">ç”²ç‹€è…ºç´ </div>
    <div class="draggable-item" data-type="hormone" data-id="parathyroid">å‰¯ç”²ç‹€è…ºç´ </div>
    <div class="draggable-item" data-type="hormone" data-id="adrenal">è…ä¸Šè…ºç´ </div>
    <div class="draggable-item" data-type="hormone" data-id="pancreas">èƒ°å³¶ç´ .å‡ç³–ç´ </div>
    <div class="draggable-item" data-type="hormone" data-id="gonad">é›Œé›„æ€§æ¿€ç´ </div>
  </div>

  <div class="game-board">
    <img src="3.png" alt="å…§åˆ†æ³Œç³»çµ±åº•åœ–" class="base-image">

    <div class="drop-zone" id="zone-gland-pituitary" data-type="gland" data-id="pituitary"></div>
    <div class="drop-zone" id="zone-gland-thyroid" data-type="gland" data-id="thyroid"></div>
    <div class="drop-zone" id="zone-gland-parathyroid" data-type="gland" data-id="parathyroid"></div>
    <div class="drop-zone" id="zone-gland-adrenal" data-type="gland" data-id="adrenal"></div>
    <div class="drop-zone" id="zone-gland-pancreas" data-type="gland" data-id="pancreas"></div>
    <div class="drop-zone" id="zone-gland-gonad" data-type="gland" data-id="gonad"></div>

    <div class="drop-zone" id="zone-hormone-pituitary" data-type="hormone" data-id="pituitary"></div>
    <div class="drop-zone" id="zone-hormone-thyroid" data-type="hormone" data-id="thyroid"></div>
    <div class="drop-zone" id="zone-hormone-parathyroid" data-type="hormone" data-id="parathyroid"></div>
    <div class="drop-zone" id="zone-hormone-adrenal" data-type="hormone" data-id="adrenal"></div>
    <div class="drop-zone" id="zone-hormone-pancreas" data-type="hormone" data-id="pancreas"></div>
    <div class="drop-zone" id="zone-hormone-gonad" data-type="hormone" data-id="gonad"></div>

    <div id="success-overlay">
      <h2>ğŸ‰ å…¨éƒ¨ç­”å°ï¼</h2>
      <button class="reset-btn" onclick="location.reload()">é‡æ–°é–‹å§‹</button>
    </div>
  </div>

</div>

<script>
  // ä¿æŒä¹‹å‰ä¿®æ­£å¾Œçš„å®Œç¾ JS é‚è¼¯ (åŒ…å«æ‰‹æ©Ÿè§¸æ§æ”¯æ´)
  const container = document.getElementById('options-container');
  const items = Array.from(container.querySelectorAll('.draggable-item'));
  items.sort(() => Math.random() - 0.5);
  items.forEach(item => container.appendChild(item));

  const draggables = document.querySelectorAll('.draggable-item');
  const dropZones = document.querySelectorAll('.drop-zone');
  const successOverlay = document.getElementById('success-overlay');
  
  let correctCount = 0;
  const totalItems = 12;
  let currentDragItem = null;

  draggables.forEach(item => {
    item.setAttribute('draggable', true);
    item.addEventListener('dragstart', (e) => {
      currentDragItem = item;
      item.classList.add('dragging');
      e.dataTransfer.effectAllowed = 'move';
      e.dataTransfer.setData('text/plain', JSON.stringify({
        id: item.dataset.id, type: item.dataset.type
      }));
    });
    item.addEventListener('dragend', () => {
      item.classList.remove('dragging');
      currentDragItem = null;
    });
    item.addEventListener('touchstart', (e) => {
      if(e.touches.length === 1) {
        currentDragItem = item;
        item.classList.add('touch-drag');
        const touch = e.touches[0];
        moveElementToTouch(item, touch);
      }
    }, {passive: false});
    item.addEventListener('touchmove', (e) => {
      if(currentDragItem) {
        e.preventDefault();
        const touch = e.touches[0];
        moveElementToTouch(item, touch);
        highlightZoneUnderTouch(touch.clientX, touch.clientY);
      }
    }, {passive: false});
    item.addEventListener('touchend', (e) => {
      if(currentDragItem) {
        item.classList.remove('touch-drag');
        item.style.position = ''; item.style.left = ''; item.style.top = ''; item.style.width = ''; item.style.transform = '';
        const touch = e.changedTouches[0];
        checkDrop(touch.clientX, touch.clientY);
        currentDragItem = null;
        dropZones.forEach(z => z.classList.remove('drag-over'));
      }
    });
  });

  function moveElementToTouch(elem, touch) {
    elem.style.left = (touch.clientX - elem.offsetWidth / 2) + 'px';
    elem.style.top = (touch.clientY - elem.offsetHeight / 2) + 'px';
  }

  function highlightZoneUnderTouch(x, y) {
    dropZones.forEach(zone => zone.classList.remove('drag-over'));
    if(currentDragItem) currentDragItem.style.display = 'none';
    const elemBelow = document.elementFromPoint(x, y);
    if(currentDragItem) currentDragItem.style.display = '';
    if (!elemBelow) return;
    const droppableBelow = elemBelow.closest('.drop-zone');
    if (droppableBelow && !droppableBelow.classList.contains('correct')) {
      droppableBelow.classList.add('drag-over');
    }
  }

  function checkDrop(x, y) {
    if(!currentDragItem) return;
    currentDragItem.style.display = 'none';
    const elemBelow = document.elementFromPoint(x, y);
    currentDragItem.style.display = '';
    if (!elemBelow) return;
    const zone = elemBelow.closest('.drop-zone');
    if (zone && !zone.classList.contains('correct')) {
      validateMatch(zone, currentDragItem);
    }
  }

  dropZones.forEach(zone => {
    zone.addEventListener('dragover', (e) => {
      e.preventDefault(); 
      if (!zone.classList.contains('correct')) zone.classList.add('drag-over');
    });
    zone.addEventListener('dragleave', () => zone.classList.remove('drag-over'));
    zone.addEventListener('drop', (e) => {
      e.preventDefault();
      zone.classList.remove('drag-over');
      if (currentDragItem && !zone.classList.contains('correct')) validateMatch(zone, currentDragItem);
    });
  });

  function validateMatch(zone, item) {
    const dragId = item.dataset.id;
    const dragType = item.dataset.type;
    const zoneId = zone.dataset.id;
    const zoneType = zone.dataset.type;

    if (dragId === zoneId && dragType === zoneType) {
      zone.innerText = item.innerText;
      zone.classList.add('correct');
      // ç­”å°æ™‚è®Šç¶ æ¡† (å¦‚æœä½ æƒ³ä¿æŒé»‘æ¡†ï¼Œå¯ä»¥æŠŠé€™è¡Œ CSS æ”¹æ‰)
      item.classList.add('matched');
      item.removeAttribute('draggable');
      correctCount++;
      if (correctCount === totalItems) {
        setTimeout(() => successOverlay.style.display = 'flex', 300);
      }
    }
  }
</script>

</body>
</html>